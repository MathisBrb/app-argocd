apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: opensearch-dashboards
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://opensearch-project.github.io/helm-charts
    chart: opensearch-dashboards
    targetRevision: 2.15.0
    helm:
      # ðŸ‘‡ LE BLOC MAGIQUE POUR TOUT DÃ‰BLOQUER ðŸ‘‡
      values: |
        opensearchHosts: "http://opensearch-cluster-master.opensearch.svc.cluster.local:9200"
        
        service:
          type: LoadBalancer

        config:
          opensearch_dashboards.yml:
            server.name: opensearch-dashboards
            # On DÃ‰SACTIVE le module de sÃ©curitÃ© cÃ´tÃ© Dashboard
            opensearch_security.enabled: false
            # On dÃ©sactive la vÃ©rification SSL
            opensearch.ssl.verificationMode: none
            # On force le cookie en non-sÃ©curisÃ© (important car tu n'es pas en HTTPS)
            opensearch_security.cookie.secure: false

  destination:
    server: https://kubernetes.default.svc
    namespace: opensearch
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
