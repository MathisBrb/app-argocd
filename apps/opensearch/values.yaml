clusterName: "opensearch-cluster"
nodeGroup: "master"
replicas: 1
singleNode: true

image: opensearchproject/opensearch
imageTag: "2.11.1"

resources:
  requests:
    cpu: "1000m"
    memory: "2Gi"
  limits:
    cpu: "2000m"
    memory: "4Gi"

persistence:
  enabled: true
  size: 20Gi

# ✅ CONFIG OPENSEARCH SÉCURITÉ SIMPLE
config:
  opensearch.yml:
    cluster.name: opensearch-cluster
    node.name: opensearch-cluster-master-0
    
    # Sécurité
    plugins.security.disabled: false
    plugins.security.ssl.http.enabled: false
    plugins.security.ssl.transport.enabled: false
    plugins.security.allow_unsafe_democertificates: true
    plugins.security.allow_default_init_securityindex: true

# Variables d'environnement
env:
  - name: OPENSEARCH_INITIAL_ADMIN_PASSWORD
    value: "AdminPassword123!"
  - name: OPENSEARCH_JAVA_OPTS
    value: "-Xms1g -Xmx1g"

# Probes
livenessProbe:
  httpGet:
    path: /
    port: 9200
    scheme: HTTP
  initialDelaySeconds: 120
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /
    port: 9200
    scheme: HTTP
  initialDelaySeconds: 120
  periodSeconds: 10

startupProbe:
  httpGet:
    path: /
    port: 9200
    scheme: HTTP
  failureThreshold: 60
  periodSeconds: 5

service:
  type: ClusterIP
  port: 9200
